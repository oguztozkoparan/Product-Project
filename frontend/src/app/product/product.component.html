<p-toast></p-toast>

<p-button label="Add" icon="pi pi-plus" (click)="openProductForm()"></p-button>

<p-table [value]="products">
  <ng-template pTemplate="header">
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th>Price</th>
      <th>Image Url</th>
      <th>Edit Action</th>
      <th>Delete Action</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{ product.id }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.price }}</td>
      <td>{{ product.imageUrl }}</td>
      <td>
        <p-button
          icon="pi pi-pencil"
          (click)="openUpdateProduct(product)"
          styleClass="p-button-warning"
        ></p-button>
      </td>
      <td>
        <p-button
          icon="pi pi-trash"
          (click)="deleteProduct(product.id)"
          styleClass="p-button-danger"
        ></p-button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-confirmDialog [style]="{ width: '50vw' }" [baseZIndex]="10000">
</p-confirmDialog>

<p-dialog
  [(visible)]="productDialogVisible"
  header="Product Form"
  [modal]="true"
  styleClass="p-fluid"
>
  <ng-template pTemplate="content">
    <div class="p-field">
      <label for="name">Name</label>
      <input type="text" pInputText [(ngModel)]="product.name" />
      <p-message
        severity="error"
        text="Field is required"
        *ngIf="submitted && !product.name"
      ></p-message>
    </div>
    <div class="p-field">
      <label for="price">Price</label>
      <input type="text" pInputText [(ngModel)]="product.price" />
      <p-message
        severity="error"
        text="Field is required"
        *ngIf="submitted && !product.price"
      ></p-message>
    </div>
    <div class="p-field">
      <label for="imageUrl">Image Url</label>
      <input type="text" pInputText [(ngModel)]="product.imageUrl" />
      <p-message
        severity="error"
        text="Field is required"
        *ngIf="submitted && !product.imageUrl"
      ></p-message>
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <button
      pButton
      label="Cancel"
      icon="pi pi-times"
      class="p-button-text"
      (click)="hideProductForm()"
    ></button>
    <button
      pButton
      label="Save"
      icon="pi pi-check"
      class="p-button-text"
      (click)="saveProduct(product)"
    ></button>
  </ng-template>
</p-dialog>
